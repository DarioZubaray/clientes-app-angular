<div class="card border-dark mt-3 text-left"><div class="card-header">{{ titulo }}: {{ factura.descripcion }}</div><div class="card-body"><h4 class="card-title"><a class="btn btn-light btn-xs" [routerLink]="['/clientes']">&laquo; Volver</a></h4><form #facturaForm="ngForm"><div class="form-group row" *ngIf="factura.cliente"><label class="col-sm-2 col-form-label" for="cliente">Cliente</label><div class="col-sm-6"><input class="form-control" type="text" name="cliente" value="{{ factura.cliente.nombre }} {{ factura.cliente.apellido }}" disabled=""/></div></div><div class="form-group row"><label class="col-sm-2 col-form-label" for="descripcion">Descripción</label><div class="col-sm-6"><input class="form-control" type="text" name="descripcion" [(ngModel)]="factura.descripcion" required="" #descripcion="ngModel"/><div class="alert alert-danger my-1" *ngIf="descripcion.invalid &amp;&amp; descripcion.touched || descripcion.invalid &amp;&amp; facturaForm.submitted">La descripción es requerida</div></div></div><div class="form-group row"><label class="col-sm-2 col-form-label" for="observacion">Observaciones</label><div class="col-sm-6"><textarea class="form-control" name="observacion" [(ngModel)]="factura.observacion"></textarea></div></div><div class="form-group row"><div class="col-sm-6"><mat-form-field class="example-full-width"><input type="text" placeholder="Añadir elemento" aria-label="Productos" matInput="" [formControl]="autocompleteControl" [matAutocomplete]="auto"/><mat-autocomplete #auto="matAutocomplete" [displayWith]="mostrarNombre" (optionSelected)="productoSeleccionado($event)"><mat-option *ngFor="let producto of productosFiltrados | async" [value]="producto">{{producto.nombre}}</mat-option></mat-autocomplete></mat-form-field><div class="alert alert-danger my-1" *ngIf="autocompleteControl.invalid &amp;&amp; facturaForm.submitted">La factura no puede esta vacia</div></div></div><div class="alert alert-info my-4" *ngIf="factura.itemFactura.length == 0">No hay lineas asignadas a la factura. Debe agregar al menos una</div><table class="table table-striped table-hover table-sm" *ngIf="factura.itemFactura.length &gt; 0"><thead><tr><th>Producto</th><th>Precio</th><th>Cantidad</th><th>Total</th><th>Eliminar</th></tr></thead><tbody><tr *ngFor="let item of factura.itemFactura"><td>{{ item.producto.nombre }}</td><td>{{ item.producto.precio }}</td><td> <input class="form-control col-sm-4" type="number" value="{{ item.cantidad }}" (change)="actualizarCantidad(item.producto.id, $event)"/></td><td>{{ item.calcularImporte() }}</td><td><button class="btn btn-danger btn-sm" type="button" (click)="eliminarItemFactura(item.producto.id)">X</button></td></tr></tbody></table><h5 class="float-right" *ngIf="factura.itemFactura.length &gt; 0">Gran Total<span class="badge badge-secondary mx-1">{{ factura.calcularGranTotal() }}</span></h5><div class="form-group row"><div class="col-sm-6"><button class="btn btn btn-rounded btn-success" type="submit" (click)="create(facturaForm)">Crear Factura<fa-icon class="text-white mx-1" [icon]="faPlus"></fa-icon></button></div></div></form></div></div>